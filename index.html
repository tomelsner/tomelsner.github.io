<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Test</title>

<script type="text/javascript">

	function whenRNPostMessageReady(cb) {
        if (window.postMessage.length === 1) cb();
        else setTimeout(function() { whenRNPostMessageReady(cb) }, 100);
    }


    
/*
window.onLoad = function(){
	alert('window on load');
	setTimeout(function () {
		window.postMessage('send to react native from index inline after onload, delay 0 milliscond', '*')
	}, 0);
	setTimeout(function () {
		window.postMessage('send to react native from index inline after onload, delay 200 milliscond', '*')
	}, 200);
	
	whenRNPostMessageReady(function() {
    	alert('yep');
        window.postMessage('hi react native!!!');
    });
	
}; 
*/


	window.postMessage('send to react native from index inline, no delay', '*')

	/*setTimeout(function () {
		window.postMessage('send to react native from index inline, delay 200 milliscond', '*')
	}, 200);
	*/
	

function waitForBridge() {
      
       //the react native postMessage has only 1 parameter
       //while the default one has 2, so check the signature
       //of the function
       
       if (window.postMessage.length !== 1){
         
         setTimeout(waitForBridge, 200);
       }
       else {
         
         window.postMessage('abc');
       }
    }
    




</script>

</head>
<body onLoad="waitForBridge();">
<a onClick="window.postMessage('yes');">Post message 8</a>
</body>
</html>