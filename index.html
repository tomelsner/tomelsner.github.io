<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Test</title>
<script>

function awaitPostMessage() {
  var isReactNativePostMessageReady = false;
  var queue = [];
  var currentPostMessageFn = function store(message) {
	queue.push(message);
  };
  if (!isReactNativePostMessageReady) {
	Object.defineProperty(window, "postMessage", {
	  configurable: true,
	  enumerable: true,
	  get: function () {
		  return currentPostMessageFn;
		},
		set: function (fn) {
		  currentPostMessageFn = fn;
		  isReactNativePostMessageReady = true;
		  setTimeout(sendQueue, 0);
		}
	});
  }

  function sendQueue() {
	while (queue.length > 0) window.postMessage(queue.shift());
  }
}
awaitPostMessage();

window.onLoad = function(){
	setTimeout(function () {
		window.postMessage('send to react native from index inline after onload, delay 0 milliscond', '*')
	}, 0);
	setTimeout(function () {
		window.postMessage('send to react native from index inline after onload, delay 200 milliscond', '*')
	}, 200);
}; 
	window.postMessage('send to react native from index inline, no delay', '*')

	setTimeout(function () {
		window.postMessage('send to react native from index inline, delay 200 milliscond', '*')
	}, 200);

</script>

</head>
<body>
<a onClick="window.postMessage('yes');">Post message</a>
</body>
</html>